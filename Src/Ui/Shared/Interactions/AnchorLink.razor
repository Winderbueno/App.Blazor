@inject IJSRuntime JSRuntime

<div @attributes="Attributes"
     @onclick="AnchorOnClickAsync"
     @onclick:preventDefault="@preventDefault">
    @ChildContent
</div>

@code {
    [Parameter(CaptureUnmatchedValues = true)]
    public IDictionary<string, object> Attributes { get; set; } = new Dictionary<string, object>();

    [Parameter]
    public RenderFragment ChildContent { get; set; } = null!;

    private string targetId = string.Empty;
    private bool preventDefault = false;

    protected override void OnParametersSet()
    {
        if (Attributes.TryGetValue("link", out object? outTargetId))
        {
            targetId = outTargetId.ToString()[1..];
            preventDefault = true;
        }

        base.OnParametersSet();
    }

    private async Task AnchorOnClickAsync()
    {
        if (!string.IsNullOrEmpty(targetId))
        {
            await JSRuntime.InvokeVoidAsync("scrollIntoView", targetId);
        }
    }
}
