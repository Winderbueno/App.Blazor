@using Application.Dtos.Auth;

@page "/auth/forgot-password"
@inject IAuthService auth

<Container FlexGrow FlexColumn FlexAlign="center" FlexJustify="center">
     
    <Card Title=@t["action.forgot-password"]>
         <Form Model=form OnValidSubmit=OnSubmit>
             <TextField @bind-Value=form.Email 
                        Label=@t["person.mail"] />

             <Button>@t["action.submit"]</Button>
         </Form>
     </Card>

     <Link Route="auth/signin">@t["action.signin"]</Link>

 </Container>

 @code {
    private ForgotPasswordFormDto form = new();

    private async Task OnSubmit()
    {
        try {
            await auth.ForgotPasswordAsync(form);
            toaster.AddSuccess("Please check your email for password reset instructions");
        }
        catch (ProblemDetailsException) { }
    }
}